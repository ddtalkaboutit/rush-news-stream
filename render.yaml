services:
  - type: cron
    name: rush-x-cron
    env: python
    plan: starter  # Starter instance
    buildCommand: |
      apt-get update && apt-get install -y chromium chromium-driver
      pip install -r requirements.txt
    runCommand: python ingest_x_only.py
    schedule: "*/15 * * * *"  # Every 15 min
    envVars:
      - key: CHROME_BIN
        value: /usr/bin/chromium-browser
      - key: CHROME_DRIVER
        value: /usr/bin/chromedriver
      - key: SYNC_API_KEY
        value: TAi-newsroom
      - key: X_COOKIE_JSON
        value: [{"domain":".x.com","expirationDate":1768097351.647187,"hostOnly":false,"httpOnly":true,"name":"__cf_bm","path":"/","sameSite":"unspecified","secure":true,"session":false,"storeId":"0","value":"pvXobLp31v2pOjjJxLef_C_WTo3J5DlfVvChy3zabEM-1768095550.7461774-1.0.1.1-Kz2X1qxR4uMLS4AsHcSdzYXzD7rAV2GAZPlD6BQWSuBhQNyKi1muLeWlKcbZlvDI5HIjzuLVaff1EeyIUNYQwBI_FmCaH4IueH6nvCdZydsddj9dP3O2_Gs_gBXh6RkV","id":1},{"domain":".x.com","expirationDate":1802655406,"hostOnly":false,"httpOnly":false,"name":"__cuid","path":"/","sameSite":"lax","secure":false,"session":false,"storeId":"0","value":"53295f33c58847ebaa6f3a31dfeffeaf","id":2},{"domain":".x.com","expirationDate":1783207144.871907,"hostOnly":false,"httpOnly":false,"name":"_ga","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"GA1.2.1218602579.1748647145","id":3},{"domain":".x.com","expirationDate":1801756490.017227,"hostOnly":false,"httpOnly":true,"name":"auth_token","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"a6cdcaf441d90f2747e839415f8e7e7230dd3156","id":4},{"domain":".x.com","expirationDate":1801756490.223252,"hostOnly":false,"httpOnly":false,"name":"ct0","path":"/","sameSite":"lax","secure":true,"session":false,"storeId":"0","value":"edf2a6701b53cf43b10255c13b1afe1a1f17767f49563d789d7c91a780d2d8d311d59ccf0ee38bad306dcf55b7b0bb456bbcf14aaed2a829b19df740979b828bd52466a602819dc5afe76dc94edb3c92","id":5},{"domain":".x.com","expirationDate":1801756441.134404,"hostOnly":false,"httpOnly":false,"name":"dnt","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"1","id":6},{"domain":".x.com","expirationDate":1801756441.22217,"hostOnly":false,"httpOnly":false,"name":"guest_id","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"v1%3A176719644116681691","id":7},{"domain":".x.com","expirationDate":1802655405.676779,"hostOnly":false,"httpOnly":false,"name":"guest_id_ads","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"v1%3A176719644116681691","id":8},{"domain":".x.com","expirationDate":1802655405.676925,"hostOnly":false,"httpOnly":false,"name":"guest_id_marketing","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"v1%3A176719644116681691","id":9},{"domain":".x.com","expirationDate":1770377666,"hostOnly":false,"httpOnly":false,"name":"intercom-device-id-jgtierkz","path":"/","sameSite":"lax","secure":false,"session":false,"storeId":"0","value":"991d5c1a-8b32-42a2-a1f7-45a62d51c01c","id":10},{"domain":".x.com","expirationDate":1801756490.017027,"hostOnly":false,"httpOnly":true,"name":"kdt","path":"/","sameSite":"unspecified","secure":true,"session":false,"storeId":"0","value":"epntQ7pWepUgOFcG9Xj5Frg8dTru5V5cZC8aaExZ","id":11},{"domain":".x.com","expirationDate":1801756441.320709,"hostOnly":false,"httpOnly":false,"name":"personalization_id","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"\"v1_TxieNH8O9rgGhlm4rNg6TA==\"","id":12},{"domain":".x.com","expirationDate":1799631410.809685,"hostOnly":false,"httpOnly":false,"name":"twid","path":"/","sameSite":"no_restriction","secure":true,"session":false,"storeId":"0","value":"u%3D1608660089719635973","id":13},{"domain":"x.com","expirationDate":1782748448,"hostOnly":true,"httpOnly":false,"name":"g_state","path":"/","sameSite":"unspecified","secure":false,"session":false,"storeId":"0","value":"{\"i_l\":0,\"i_ll\":1767196448670,\"i_b\":\"+hMSwT6CTOdRjSxT3+t2iTLGUAZicSh29h2PeHeNIf0\",\"i_e\":{\"enable_itp_optimization\":0}}","id":14},{"domain":"x.com","hostOnly":true,"httpOnly":false,"name":"lang","path":"/","sameSite":"unspecified","secure":false,"session":true,"storeId":"0","value":"en","id":15}]  # Paste your minified JSON string here
      - key: PYTHON_VERSION
        value: 3.12.3
